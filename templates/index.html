<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>index</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
</head>
<body>
<div class="my-container">
    <div class="table-form" style="background-image: url('{{ BACKGROUND_IMAGE }}');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 370px;
            color: #07d79f;">
        <div class="table-title">
            <span style="color: #07d79f;">Погода: {{ CITY }}</span>
            <img src="{{ url_for('static', filename=ICON) }}" alt="weather icon" style="width: 60px;">
            <b>
                {{ TEMPERATURE }}
            </b>
        </div>
        {% if WEATHER is mapping and WEATHER %}
        <ul style="font-size: 16px;">
            {% for key, value in WEATHER.items() %}
                <li>{{ value.description }}</li>
            {% endfor %}
        </ul>
        {% else %}
            {{ CITY or "" }}
        {% endif %}
        {% if USERNAME %}
        <div class="weather_button">
            <form action="{{ url_for('index') }}" method="post">
                <div class="col">
                    <input type="text" class="form-control width=200px" style="width: 300px;" placeholder="Город" name="city">
                </div>
                <button type="submit" class="btn btn-dark" name="form_type" value="weather">Отправить</button>
            </form>
        </div>
        {% else %}
            <div class="registration_error">Войдите для выбора города!</div>
        {% endif %}
    </div>
    <div class="error">
<!--            {{ ERROR or "" }}-->
    </div>
    <div class="table-wrapper">
        <div class="table-title">Курсы валют на: {{ DATE }}</div>
            <div class="table-container">
                <table class="table table-dark table-striped">
                    <tr class="table-head">
                      <th>Абревиатура</th>
                      <th>Название</th>
                      <th>Количество</th>
                      <th>Цена</th>
                    </tr>
                  {% for cur in CURRENCY %}
                    {% if cur['Cur_Abbreviation'] in ['RUB', 'USD', 'EUR', 'CNY'] %}
                        <tr>
                          <th class="table-head">{{ cur['Cur_Abbreviation'] }}</th>
                          <td>{{ cur['Cur_Name'] }}</td>
                          <td>{{ cur['Cur_Scale'] }}</td>
                          <td>{{ cur['Cur_OfficialRate'] }}</td>
                        </tr>
                    {% endif %}
                  {% endfor %}
                </table>
            </div >
         {% if USERNAME %}
            <div class="table-form">
                <form action="/" method="post" id="myForm">
                    <div class="col">
                        <input type="text" class="form-control" placeholder="01" name="DAY">
                    </div>
                    <div class="col">
                        <input type="text" class="form-control" placeholder="07" name="MONTH">
                    </div>
                    <div class="col">
                        <input type="text" class="form-control" placeholder="2016" name="YEAR">
                    </div>
                    <button type="submit" class="btn btn-dark" name="form_type" value="currency">Отправить</button>
                </form>
                <div class="d-grid gap-2">
                    <a class="btn btn-dark" style="color: #607d8b" href="{{ url_for('reset') }}">
                        Текущий курс валют
                    </a>
                </div>
            </div>
        <div class="error">
            {{ ERROR or "" }}
        </div>
        {% else %}
            <div class="registration_error">Авторизуйтесь для работы с формой валюты!</div>
        {% endif %}
    </div>
    <div class="table-form">
        <div class="log_in">
            {% if USERNAME %}
                {{ USERNAME }} <a href="{{ url_for('logout') }}">Выйти</a>
            {% endif %}
        </div>
        <form action="{{ url_for('register') }}" method="post">
            <div class="col">
                <input type="text" class="form-control" placeholder="Логин" name="username">
            </div>
            <div class="col">
                <input type="text" class="form-control" placeholder="Пароль" name="password">
            </div>
            <button type="submit" class="btn btn-dark" style="width: 140px;">Регистрация</button>
        </form>
        <div class="error">
            {{ REGISTER_ERROR or "" }}
        </div>
        <form action="{{ url_for('login') }}" method="post">
            <div class="col">
                <input type="text" class="form-control" placeholder="Логин" name="username">
            </div>
            <div class="col">
                <input type="text" class="form-control" placeholder="Пароль" name="password">
            </div>
            <button type="submit" class="btn btn-dark" style="color: #607d8b; width: 140px;">Авторизация</button>
        </form>
        <div class="error">
            {{ LOGIN_ERROR or "" }}
        </div>
    </div>
</div>
<div class="films-container">
    <ul class="films-list">
      {% for film in FILMS %}
        <li class="film">
            <a href="{{ film.url }}" target="_blank" rel="noopener noreferrer">
                <img src="{{ film.image }}" alt="{{ film.title }}">
            </a>
            <a href="{{ film.url }}" target="_blank" rel="noopener noreferrer">
                {{ film.title }}
            </a>
        </li>
      {% endfor %}
    </ul>
</div>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>